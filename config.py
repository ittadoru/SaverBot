import os
from dotenv import load_dotenv

load_dotenv()

# ---------------------------------------------------------------------------
# Базовые параметры бота
# ---------------------------------------------------------------------------
BOT_TOKEN = os.getenv("BOT_TOKEN")          # Токен Telegram бота
ADMINS = list(map(int, os.getenv("ADMINS", "").split(",")))  # Список ID админов (через запятую)
PRIMARY_ADMIN_ID = int(os.getenv("ADMIN"))  # Главный админ (получает ошибки)

# ---------------------------------------------------------------------------
# Инфраструктура / внешние сервисы
# ---------------------------------------------------------------------------
DATABASE_URL = os.getenv("DATABASE_URL")                    # URL базы данных

# ---------------------------------------------------------------------------
# Поддержка / коммуникация
# ---------------------------------------------------------------------------
SUPPORT_GROUP_ID = int(os.getenv("SUPPORT_GROUP_ID"))      # ID группы поддержки
SUBSCRIBE_TOPIC_ID = int(os.getenv("SUBSCRIBE_TOPIC_ID"))  # ID темы (топика) для уведомлений

# ---------------------------------------------------------------------------
# Оплата / магазин
# ---------------------------------------------------------------------------
SHOP_ID = int(os.getenv("SHOP_ID"))        # ID магазина YooKassa
API_KEY = os.getenv("API_KEY")            # Секретный ключ API
DOMAIN = os.getenv("DOMAIN")              # Базовый домен (для ссылок/вебхуков)

# ---------------------------------------------------------------------------
# Загрузка файлов
# ---------------------------------------------------------------------------
DOWNLOAD_DIR = os.getenv("DOWNLOAD_DIR", "downloads")

# ---------------------------------------------------------------------------
# Лимиты
# ---------------------------------------------------------------------------
DAILY_DOWNLOAD_LIMITS = {
    1: 10,    # 1 уровень (по умолчанию)
    2: 15,    # 2 уровень (1+ реферал)
    3: 20,    # 3 уровень (3+ реферала)
    4: None,  # 4 уровень (10+ рефералов, VIP) — безлимит
    5: None,  # 5 уровень (30+ рефералов, бессрочная подписка) — безлимит
}
MAX_FREE_VIDEO_MB = int(os.getenv("MAX_FREE_VIDEO_MB"))  # бизнес-лимит для бесплатных пользователей (можно менять)
FORMAT_SELECTION_TIMEOUT = 30

SUBSCRIPTION_YEARS_FOR_LIFETIME = 100
SUBSCRIPTION_LIFETIME_DAYS = SUBSCRIPTION_YEARS_FOR_LIFETIME * 365

BROADCAST_PROGRESS_UPDATE_INTERVAL = 7
BROADCAST_PER_MESSAGE_DELAY = 0.2

os.makedirs(DOWNLOAD_DIR, exist_ok=True)

